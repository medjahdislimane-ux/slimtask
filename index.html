<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlimTask</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Flag Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.11.1/css/flag-icons.min.css">
    <!-- Google API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<div class="container">
    <header>
        <h1>
            <span id="extNameTitle">SlimTask</span>
            <span style="font-size:0.5em; opacity:0.5">V1.0.1</span>
            <a href="#" id="changelogLink" style="font-size:0.4em; opacity:0.7; color:var(--primary); text-decoration:none;">Changelog</a>
        </h1>
        <div class="header-actions">
            <button class="btn-google-signin" id="btnGoogleSignIn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                <span id="googleSignInText">Sign in</span>
            </button>
            
            <select class="language-selector" id="languageSelector">
                <option value="fr"><span class="fi fi-fr"></span> Français</option>
                <option value="en"><span class="fi fi-gb"></span> English</option>
                <option value="es"><span class="fi fi-es"></span> Español</option>
                <option value="de"><span class="fi fi-de"></span> Deutsch</option>
            </select>
            
            <select class="theme-selector" id="themeSelector"></select>
            
            <input type="file" id="fileInput" style="display:none" accept=".json">
            
            <button class="btn-header" id="btnImport" title="Importer">
                <i class="fas fa-file-import"></i>
            </button>
            <button class="btn-header" id="btnExport" title="Exporter">
                <i class="fas fa-file-export"></i>
            </button>
            <button class="btn-header btn-new-task" id="btnNewTask">
                <i class="fas fa-plus"></i>
                <span id="btnNewTaskText"></span>
            </button>
        </div>
    </header>

    <div class="tabs-wrapper" id="tabsContainer"></div>
    
    <div class="task-list-wrapper">
        <div id="taskList" class="task-list"></div>
    </div>
</div>

<div class="copy-button" id="copyButton">
    <i class="fas fa-copy"></i>
    <span id="copyButtonText"></span>
</div>

<div id="taskModal" class="modal">
    <div class="modal-content">
        <h3 id="modalTitle"></h3>
        <input type="hidden" id="taskId">
        
        <label id="labelTitle"></label>
        <input type="text" id="taskTitle">

        <label id="labelCategory"></label>
        <select id="taskCategory"></select>

        <div style="display:flex; gap:15px;">
            <div style="flex:1">
                <label id="labelPriority"></label>
                <select id="taskPriority"></select>
            </div>
            <div style="flex:1">
                <label id="labelStatus"></label>
                <select id="taskStatus"></select>
            </div>
        </div>

        <label id="labelComment"></label>
        <textarea id="taskComment" rows="2"></textarea>
        
        <div style="background:#222; padding:10px; border-radius:6px; margin-bottom:15px;">
            <label id="labelStructure" style="margin:0"></label>
            <div id="structureTip" style="font-size:0.8rem; color:#888; margin-bottom:5px;"></div>
            <button class="btn btn-sm btn-secondary" type="button" id="moveToRootBtn"></button>
        </div>

        <div style="display:flex; justify-content:flex-end; gap:10px;">
            <button class="btn btn-secondary" id="btnCancel"></button>
            <button class="btn btn-danger" id="btnDelete"></button>
            <button class="btn btn-primary" id="btnSave"></button>
        </div>
    </div>
</div>

<div id="confirmDialog" class="modal">
    <div class="modal-content" style="max-width: 400px;">
        <h3 id="confirmTitle"></h3>
        <p id="confirmMessage"></p>
        <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
            <button class="btn btn-secondary" id="confirmCancel"></button>
            <button class="btn btn-danger" id="confirmOk"></button>
        </div>
    </div>
</div>

<!-- Modal Changelog -->
<div id="changelogModal" class="modal">
    <div class="modal-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 id="changelogTitle" style="margin: 0; color: var(--primary);">Changelog</h2>
            <button class="btn btn-sm btn-secondary" id="closeChangelog" style="padding: 8px 12px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="changelogContent"></div>
    </div>
</div>

<!-- Zone de drop pour sortir les sous-tâches -->
<div class="drop-zone-root" id="dropZoneRoot">
    <i class="fas fa-arrow-left"></i>
</div>

<script src="script.js"></script>

</body>
</html>
